<dom-module id="pratilipi-review">

	<style>
		
		:host {
			display: block;
		}
		
		paper-card {
			width: 100%;
			padding: 10px;
		}
		
		iron-icon, .user-dp {
			width: 64px; 
			height: 64px; 
			display: block; 
			margin: 10px auto;
			color: #989898;
		}

	</style>

	
	<template>
		<paper-card id="reviewcard">
			<div class="row" style="padding: 10px;">
				<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3 text-center">
					<a href="{{ review.userProfilePageUrl }}"><span style="color: #333;">{{ review.userName }}</span></a>
					<br/>
					<pratilipi-rating value="{{ review.rating }}" />
		   			<template is="dom-if" if="{{ reviewUserImageUrl }}">
		   				<a href="{{ review.userProfilePageUrl }}">
		   					<img class="img-circle user-dp" src="{{ reviewUserImageUrl }}" alt="{{ user.userName }}" title="{{ user.userName }}"/>
		   				</a>
		   			</template>
		   			<template is="dom-if" if="{{ !review.userImageUrl }}">
		   				<iron-icon icon="account-circle"></iron-icon>
		   			</template>
		   			<span>{{ reviewDateMillis }}</span>
				</div>
				<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
					<p style="text-align: justify; white-space:pre-wrap;">{{ reviewText }}</p>
				</div>
			</div>
		</paper-card>
	</template>
	

	<script>
	
		Polymer({

			is: 'pratilipi-review',
			
			properties: {
				review: { type: Object, observer: "ready" }
			},
			
			ready: function() {
				
				if( ( this.review.reviewTitle == null || this.review.reviewTitle.trim() == "" )
						&& ( this.review.review == null || this.review.review.trim() == "" ) ) {
					this.$.reviewcard.style.display =  'none';
					return;
				}
				
				var reviewText = "";
				
				if( this.review.reviewTitle != null && this.review.reviewTitle.trim() != "" )
					reviewText = this.review.reviewTitle + "\n\n";
					
				if( this.review.review != null && this.review.review.trim() != "" )
					reviewText = reviewText + this.review.review;
					
				this.set( 'reviewText', reviewText );

				if( this.review.userImageUrl ) {
					if( this.review.userImageUrl.indexOf( '?' ) == -1 )
						this.reviewUserImageUrl = this.review.userImageUrl + "?" + "width=64";
					else
						this.reviewUserImageUrl = this.review.userImageUrl + "&" + "width=64";
				}
				
				if( this.review.reviewDateMillis )
					this.reviewDateMillis = convertDate( this.review.reviewDateMillis );
			}

		});
		
	</script>

</dom-module>
