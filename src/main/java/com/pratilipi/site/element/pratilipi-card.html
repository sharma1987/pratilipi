<dom-module id="pratilipi-card">

	<style>
	
		img {
			width: 100px;
			height: 150px;
		}
		
		.media, .media-body{
			overflow: visible;
		}
		
		.media-body {
			position: relative;
			height: 150px;
			padding-bottom: 32px;	
		}

		h6 {
			margin-top: 0px;
			margin-bottom: 5px;
		}
		
		#authorname {
		    white-space: nowrap; 
		    width: 3em; 
		    overflow: hidden;
		    text-overflow: ellipsis; 
		   
		}


		.btn {
			position: absolute;
			bottom: 0px;
			padding: 3px 30px;
			border-radius: 0px;
		}
		
	</style>


	<template>
		<div class="grid-col">
			<div class="media">

				<div class="media-left">
					<a href="{{ pratilipi.pageUrlAlias }}">
						<img class="media-object" src="{{ pratilipi.coverImageUrl }}" alt="{{ pratilipi.title }}" title="{{ pratilipi.titleEn }}"/>
					</a>
				</div>

			  	<div class="media-body">
			  		<h4 class="media-heading">
					 	<a href="{{ pratilipi.pageUrlAlias }}"  data-toggle="tooltip" data-placement="top" title="PRATILIPI TITLE!">{{ pratilipi.title }}</a>
					</h4>
					<h6>
						<a href="{{ pratilipi.author.pageUrlAlias }} "  data-toggle="tooltip" data-placement="top" title="Pratilipi Book Author!">
							<div id="authorname" style="display: block;">{{ pratilipi.author.name }}</div>
						 </a> 	
					</h6>
					<div>
						<pratilipi-rating value="{{ pratilipi.averageRating }}" />
					</div>
					<div>
						<a href="{{__hack__}}#"><span class="badge">Classic</span></a>
					</div>
					<div>
						<button type="button" class="btn green">Free !</button>
					</div>
				</div>
				
			</div>
		</div>
	</template>


	<script>

		Polymer({

			is: 'pratilipi-card',
			
			properties: {
				pratilipi: { type: Object }
			},
			
			ready: function() {
				var gridCol = this.querySelector( '.media' );
				var heading = this.querySelector( 'h4 a' );
				var title = this.pratilipi.title;
				function setColHeight( e ) {
					var jGridCol = jQuery( gridCol );
					var jHeading = jQuery( heading );
					jHeading.text( title );
					var len = title.length;
					while( jGridCol.height() > 150 && len > 1 ) {
						len = len - 1;
						jHeading.text( title.substring( 0, len ).trim() + " ..." );
					}
				};
				jQuery( document ).ready( setColHeight );
				jQuery( window ).load( setColHeight );
				jQuery( window ).resize( setColHeight );
				$('[data-toggle="tooltip"]').tooltip();   
							  
			},

			
		});

	</script>

</dom-module>