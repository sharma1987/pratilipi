<dom-module id="pratilipi-author-following">
	<style>
		:host {
			display: block;
			margin-top: 6px;
		}
		.author-following .author-following-header {
			padding-top: 16px;
		}
		.author-following .author-following-header h5 {
			font-weight: 700;
			text-align: center;
			margin-bottom: 12px;
		}
		.author-following .author-following-header .following-text {
			font-size: 15px;
		}
		hr {
			margin-top: 0.5em;
			margin-bottom: 0.8em;
			margin-left: 8px;
			margin-right: 8px;
			border: 0;
			border-top: 2px solid #eee;
		}
		
		/* Bootstrap overrides */
		.row {
			margin-left: -12px;
			margin-right: -12px;
			padding-bottom: 8px;
		}
		.col-xs-12, .col-sm-12, .col-md-6, .col-lg-6 {
			padding-left: 12px;
			padding-right: 12px;
		}
	</style>
	<template>
		<div class="secondary-500 pratilipi-shadow author-following">
			<div class="author-following-header">
				<h5 class="pratilipi-red">Following</h5>
				<div class="following-text text-center">{{ followCount }} Members</div>
			</div>
			<hr/>
			<div class="row following-grid">
				<template is="dom-repeat" items="{{ followList }}">
					<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
						<pratilipi-follow-author follow-object="{{ item }}"></pratilipi-follow-author>
					</div>
				</template>
			</div>
		</div>
	</template>

	<script>

		Polymer({

			is: 'pratilipi-author-following',
			
			properties: {
				followingList: { type: Object },
				
				followList: { type: Array, value: function() { return []; } },
				followCount: { type: Number },
			},
			
			processfollowingListObject: function( followingListObject ) {
				var authorList = followingListObject.authorList;
				for( var i = 0; i < authorList.length; i++ ) {
					var author = authorList[i];
					var follow = {
							authorId: author.authorId,
							name: author.name,
							pageUrl: author.pageUrl,
							followCount: author.followCount,
							imageUrl: author.imageUrl,
							following: author.following,
							canFollow: author.user.userId != document.querySelector( 'pratilipi-user' ).getCurrentUser().userId 
						};
						this.push( 'followList', follow );
				}

				this.set( 'cursor', followingListObject.cursor );
				this.set( 'followCount', followingListObject.numberFound );
			},
			
			attached: function() {
				this.processfollowingListObject( this.followingList );
			}

		});

	</script>

</dom-module>