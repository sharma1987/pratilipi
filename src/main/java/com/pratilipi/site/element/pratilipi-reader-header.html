<dom-module id="pratilipi-reader-header">
	
	<style>
		paper-card {
			height: 64px;
			width: 100%;
			opacity: 0.96;
			padding: 10px 15px;
			--paper-card-header: { display: none };
		}
		.container, .container div {
			display: inline-block;
		}
		paper-icon-button {
			width: 45px;
			height: 45px;
		}
		paper-item {
			font-size: inherit;
			font-family: inherit;
		}
	</style>

	<template>
		<paper-card>
			<table style="min-width: 100%;">
				<tr>
					<td align="left" width="65px">
						<paper-icon-button icon="icons:arrow-back" on-click="exitReader"></paper-icon-button>
					</td>
					<td width="auto">
						<h4 style="margin-top: 10px; display: inline-block;">{{ pratilipi.title }}</h4>
					</td>
					<td align="right" width="150px">
						<template is="dom-if" if="{{ hasAccessToUpdate }}">
							<paper-icon-button icon="icons:create" on-click="redirectToWriterPanel"></paper-icon-button>
						</template>
						<div class="dropdown" style="display: inline-block;">
							<paper-icon-button icon="icons:chrome-reader-mode" data-toggle="dropdown"></paper-icon-button>
							<ul class="dropdown-menu pull-right" style="margin-top: 13px;">
								<template is="dom-if" if="{{ !addedToLib }}">
									<li>
										<a style="padding: 5px; margin: 0;">
											<paper-item on-click="addToLibrary">
												<paper-icon-item><iron-icon style="color: #107FE5;" icon="icons:add-circle"></iron-icon></paper-icon-item>
												&nbsp;&nbsp;
												<paper-item-body>${ _strings.add_to_library }</paper-item-body>
											</paper-item>
										</a>
									</li>
								</template>
								<template is="dom-if" if="{{ addedToLib }}">
									<li>
										<a style="padding: 5px; margin: 0;">
											<paper-item on-click="removeFromLibrary">
												<paper-icon-item><iron-icon style="color: #D0021B;" icon="icons:remove-circle"></iron-icon></paper-icon-item>
												&nbsp;&nbsp;
												<paper-item-body>${ _strings.remove_from_library }</paper-item-body>
											</paper-item>
										</a>
									</li>
								</template>
								<li>
									<a style="padding: 5px; margin: 0;" href="/library">
										<paper-item>
											<paper-icon-item><iron-icon style="color: #107FE5;" icon="icons:view-list"></iron-icon></paper-icon-item>
											&nbsp;&nbsp;
											<paper-item-body>${ _strings.my_library }</paper-item-body>
										</paper-item>
									</a>
								</li>
							</ul>
						</div>
						<paper-icon-button icon="icons:add" on-click="increaseFontSize"></paper-icon-button>
						<paper-icon-button icon="icons:remove" on-click="decreaseFontSize"></paper-icon-button>
						<paper-icon-button icon="icons:list" on-click="openNavigation"></paper-icon-button>
					</td>
				</tr>
			</table>
		</paper-card>
	</template>

	<script>
	
		Polymer({

			is: 'pratilipi-reader-header',
			
			properties: {
				pratilipiData: { type: Object },
				pratilipi: { type: Object, notify: true },
				hasAccessToUpdate: { type: Boolean },
				addedToLib: { type: Boolean, value: false }
			},
			
			increaseFontSize: function() {
				document.querySelector( 'pratilipi-reader-page' ).increaseFontSize();
			},
			
			decreaseFontSize: function() {
				document.querySelector( 'pratilipi-reader-page' ).decreaseFontSize();
			},
			
			addToLibrary: function() {
				document.querySelector( 'pratilipi-reader-page' ).addToLibrary();
			},
			
			removeFromLibrary: function() {
				document.querySelector( 'pratilipi-reader-page' ).removeFromLibrary();
			},
			
			openNavigation: function() {
				document.querySelector( 'pratilipi-reader-navigation' ).toggleNavigation();
			},
			
			redirectToWriterPanel: function() {
				document.querySelector( 'pratilipi-reader-page' ).redirectToWriterPanel();
			},
			
			exitReader: function() {
				document.querySelector( 'pratilipi-reader-page' ).exitReader();
			}
			
		});
	</script>

</dom-module>