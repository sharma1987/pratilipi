<#include "pratilipi-follow-author.html">
<#include "pratilipi-follow-author-popup.html">

<dom-module id="pratilipi-follow-author-grid">
	<style>
		:host {
			display: block;
			margin-top: 6px;
		}
		.author-follow {
			padding: 8px;
		}
		.author-follow .author-follow-header {
			padding-top: 8px;
		}
		.author-follow .author-follow-header h5 {
			font-weight: 700;
			text-align: center;
			margin-bottom: 12px;
		}
		.author-follow .author-follow-header .follow-text {
			font-size: 15px;
		}
		.author-follow .more-button {
			margin-top: 16px;
		    background: #F1F8FB;
		    padding: 16px;
		    text-align: center;
		    color: #0C68BD;
		    cursor: pointer;
		    font-size: 16px;
		    font-weight: 700;
		    letter-spacing: 0.3px;
		    line-height: 16px;
		    text-shadow: 0px 1px 2px #FFFFFF;
		}
		hr {
			margin-top: 0.5em;
			margin-bottom: 0.8em;
			margin-left: 8px;
			margin-right: 8px;
			border: 0;
			border-top: 2px solid #eee;
		}
		
		/* Bootstrap overrides */
		.row {
			margin-left: -12px;
			margin-right: -12px;
			padding-bottom: 8px;
		}
		.col-xs-12, .col-sm-12, .col-md-6, .col-lg-6 {
			padding-left: 12px;
			padding-right: 12px;
		}
	</style>

	<template>
		<div class="secondary-500 pratilipi-shadow author-follow">
			<div class="author-follow-header">
				<h5 class="pratilipi-red">{{ title }}</h5>
				<div class="follow-text text-center">{{ numberFound }} Members</div>
			</div>
			<hr/>
			<div class="row follow-grid">
				<template is="dom-repeat" items="{{ reducedFollowList }}">
					<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
						<pratilipi-follow-author follow-object="{{ item }}"></pratilipi-follow-author>
					</div>
				</template>
			</div>
			<template is="dom-if" if="{{ showModalButton }}">
				<div class="more-button" on-click="openModal">Show More</div>
			</template>
			<pratilipi-follow-author-popup
				follow-list="{{ followList }}"
				number-found="{{ numberFound }}"
				title="{{ title }}"
				is-finished="{{ isFinished }}"></pratilipi-follow-author-popup>
		</div>
	</template>

	<script>

		Polymer({

			is: 'pratilipi-follow-author-grid',

			properties: {
				followList: { type: Array },
				reducedFollowList: { type: Array, value: function() { return []; } },
				numberFound: { type: Number },
				title: { type: String },
				showModalButton: { type: Boolean, value: false },
				isFinished: { type: Boolean }
			},

			attached: function() {
				var itemsToShow = 3;
				for( var i = 0; i < Math.min( this.followList.length, itemsToShow ); i++ )
					this.push( 'reducedFollowList', this.followList[i] );
				this.set( 'showModalButton', this.followList.length > itemsToShow ? true : false );
			},

			openModal: function() {
				this.querySelector( 'pratilipi-follow-author-popup' ).openModal();
			},

			loadMore: function() {
				this.domHost.loadMore();
			}
			
		});

	</script>

</dom-module>