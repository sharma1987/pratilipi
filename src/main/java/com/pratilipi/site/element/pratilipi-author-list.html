<dom-module id="pratilipi-author-list">

	<style>
		
		:host {
			display: block;
		}
		
		.custom-style {
			background: #FFF;
			border-bottom: 1px solid #DDD;
			padding: 16px 22px;
			-webkit-font-smoothing: antialiased;
			box-sizing: border-box;
			will-change: transform;
			transform: translate3d(0px, 0px, 0px);
		}
		
		.text {
			text-align: center;
			margin-top: 12px;
		}
		
		.pratilipi-red {
			font-size: 16px;
		}
		
		.img-circle {
			width: 48px;
			height: 48px;
		}
		
	</style>

	<template>
		<div class="custom-style row">
			<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text pratilipi-red">S.No</div>
			<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text pratilipi-red">Picture</div>
			<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 text pratilipi-red">Full Name</div>
			<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 text pratilipi-red">Full Name En</div>
			<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text pratilipi-red">Email</div>
			<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text pratilipi-red">Contents Published</div>
			<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text pratilipi-red">Registered On</div>
		</div>
		<template is="dom-repeat" id="repeatAuthorList" items="[[ modifiedAuthorList ]]">
			<div class="custom-style">
				<div class="row">
					<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text">
						[[ item.sno ]]
					</div>
					<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
						<img class="img-circle" src="[[ item.imageUrl ]]">
					</div>
					<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 text">
						[[ item.fullName ]]
					</div>
					<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 text">
						[[ item.fullNameEn ]]
					</div>
					<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text">
						[[ item.email ]]
					</div>
					<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text">
						[[ item.contentPublished ]]
					</div>
					<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 text">
						[[ item.registrationDateMillis ]]
					</div>
				</div>
			</div>
		</template>
		<br class="pratilipi-break"/>
	
		<iron-ajax
				id="AjaxGet"
				url="/api/author/list"
				method="GET"
				params="[[ filter ]]"
				content-type="application/json"
				handle-as="json"
				on-response="_handleAjaxGetResponse"
				on-error="_handleAjaxGetError"
				></iron-ajax>
	</template>
		

	<script>
		function convertDate( date ) {
			var d = new Date( date );
			function day(d) { return (d < 10) ? '0' + d : d; }
			function month(m) { var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']; return months[m]; }
			return [ day(d.getDate()), month(d.getMonth()), d.getFullYear() ].join(' ');
		}
	
		Polymer({

			is: 'pratilipi-author-list',

			properties: {
				authorList: { type: Array },
				modifiedAuthorList: { type: Array, value: [] },
				filter: { type: Object },
				cursor: { type: String },
				isLoading: { type: Boolean, value: false },
				isFinished: { type: Boolean, value: false }
			},
			
			process: function( authorList ) {
				for( var i = 0; i < authorList.length; i++ ) {
					authorList[i][ "sno" ] = i+1;
					
					
					if( authorList[i][ "imageUrl" ].indexOf( '?' ) == -1 )
						authorList[i][ "imageUrl" ] = authorList[i][ "imageUrl" ] + "?" + "width=48";
					else
						authorList[i][ "imageUrl" ] = authorList[i][ "imageUrl" ] + "&" + "width=48";
					
					if( authorList[i][ "fullName" ] == null )
						authorList[i][ "fullName" ] = "N.A";
					
					if( authorList[i][ "fullNameEn" ] == null )
						authorList[i][ "fullNameEn" ] = "N.A";
					
					if( authorList[i][ "email" ] == null )
						authorList[i][ "email" ] = "N.A";
					
					if( authorList[i][ "contentPublished" ] == null )
						authorList[i][ "contentPublished" ] = 0;
					
					authorList[i][ "registrationDateMillis" ] = convertDate( authorList[i][ "registrationDateMillis" ] );
						
					this.push( 'modifiedAuthorList', authorList[i] );
				}
			},
			
			ready: function() {
				this.process( this.authorList );
			},
			
			_handleAjaxGetResponse: function( event ) {
				
			},
			
			_handleAjaxGetError: function( event ) {
				
			}
			
		});
	</script>

</dom-module>