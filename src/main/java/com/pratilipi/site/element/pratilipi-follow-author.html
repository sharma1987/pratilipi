<dom-module id="pratilipi-follow-author">
	<style>
		:host {
			display: inline-block;
			width: 100%;
		}
		.follow-author {
			width: 100%;
			padding: 14px 12px;
			display: flex;
		}
		.follow-author .follow-author-image {
			float: left;
			text-align: center;
			align-self: center;
			margin-right: 16px;
		}
		.follow-author .follow-author-name {
			float: left;
			width: 65%;
			text-align: left;
			align-self: center;
			font-size: 15px;
		}
		.follow-author .follow-author-name a, .follow-author .follow-author-name a:hover, .follow-author .follow-author-name a:focus {
			color: #333;
			display: inline-block;
		}
		.follow-author .follow-author-button {
			margin-left: 8px;
			float: right;
			text-align: center;
			align-self: center;
		}
		.follow-author .follow-author-button .pratilipi-light-blue-button {
			margin: 0;
			border-radius: 4px;
			font-weight: 400;
			font-size: 15px;
		}
		.follow-author .follow-author-button .pratilipi-grey-button {
			border-radius: 4px;
			font-weight: 400;
			font-size: 13px;
			-webkit-box-shadow: none;
			-moz-box-shadow: none;
			box-shadow: none;
			margin: 0;
		}
		.follow-author .yourself {
			margin-left: 8px;
			float: right;
			text-align: right;
			align-self: center;
			font-size: 14px;
			color: #1c9963;
			font-weight: 600;
		}
	</style>
	<template>
		<div class="follow-author">
			<div class="follow-author-image">
				<a href="{{ pageUrl }}"><img src="{{ imageUrl }}" class="img-circle" /></a>
			</div>
			<div class="follow-author-name contain-title ellipsed">
				<a href="{{ pageUrl }}">{{ name }}</a>
			</div>
			<template is="dom-if" if="{{ canFollow }}">
				<div class="follow-author-button">
					<template is="dom-if" if="{{ !following }}">
						<button class="pratilipi-light-blue-button" on-click="followAuthor">Follow</button>
					</template>
					<template is="dom-if" if="{{ following }}">
						<button class="pratilipi-grey-button" on-click="unFollowAuthor">UnFollow</button>
					</template>
				</div>
			</template>
			<template is="dom-if" if="{{ !canFollow }}">
				<div class="yourself">YOURSELF</div>
			</template>
		</div>
	</template>

	<script>

		Polymer({

			is: 'pratilipi-follow-author',
			
			properties: {
				followObject: { type: Object, observer: "_followObjectObserver" },

				authorId: { type: String },
				name: { type: String },
				pageUrl: { type: String },
				followCount: { type: Number },
				imageUrl: { type: String },
				following: { type: Boolean },
				canFollow: { type: Boolean }
			},
			
			_followObjectObserver: function() {
				this.set( 'authorId', this.followObject.authorId );
				this.set( 'name', this.followObject.name );
				this.set( 'pageUrl', this.followObject.pageUrl );
				this.set( 'followCount', this.followObject.followCount );
				this.set( 'imageUrl', this.followObject.imageUrl + ( this.followObject.imageUrl.indexOf( "?" ) == -1 ? "?" : "&" ) + "width=48" );
				this.set( 'following', this.followObject.following );
				this.set( 'canFollow', this.followObject.canFollow );
			},
			
			followAuthor: function() {
				console.log( "Follow-" + this.authorId );
			},
			
			unFollowAuthor: function() {
				console.log( "UnFollow-" + this.authorId );
			},

		});

	</script>

</dom-module>