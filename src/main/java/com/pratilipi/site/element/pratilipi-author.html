<!-- Version:6.0 -->

<link rel="import" href="pratilipi-social.html" />

<dom-module id="pratilipi-author">

	<style>

		:host {
			display: block;
		}

		.media {
			padding: 10px;
		}		

		
		.media-left {
			padding: 10px;
		}
		
		.media-left img {
			width: 150px;
			height: 225px;
		}
		
		.media-left a {
			display: block;
			text-align:center;
			width: 150px;
			margin-top: 10px;
			padding: 5px;
		}
		
		.media-left a * {
			margin: 0px;
			color: white;
		}
		
		
		.media-body {
			padding: 10px;
		}
		
		
		
		
		
		td, th {
			width: 150px;
			height: 25px;
		}

		td, .summary{
			color: #666666; 
		}

		.show-more, .show-less {
			color: black;
			font-weight: bold;
			text-decoration: underline;
		}
		
		
		
		
		
	</style>
	
	
	<template>
		<div class="secondary-500">
			<div class="media">
	
				<div class="media-left">
					<img class="media-object" src="{{ author.imageUrl }}" alt="{{ author.fullName }}" title="{{ author.fullNameEn }}"/>
					<div class="primary-500">
						<a href="#PublishedWorks">
							<h4><span>{{ author.contentPublished }}</span> Works</h4>
							<span>on Pratilipi</span>
						</a>
					</div>
					<pratilipi-social shareUrl="getShareUrl"></pratilipi-social>
				</div>
				
				<div class="media-body">
					<h1 class="media-heading">{{ author.name }}</h1>
					<template is="dom-if" if="{{ author.penName }}">
						<h4>"<span>{{ author.penName }}</span>"</h4>
					</template>
					<br/>
					<div>
						<span class="summary" style="text-align:justify;">{{ pratilipi.summary }}</span>
						<a href="#" class="show-more" on-click="showCompleteSummary"><small>${ _strings.show_more }</small></a>
						<a href="#" class="show-less" on-click="showSummarySnippet"><small>${ _strings.show_less }</small></a>
					</div>
					<br/>
				</div>
				
			</div>
			<hr/>
		</div>
	</template>
	
	
	<script>
		Polymer({
			
			is: 'pratilipi-author',
			
			properties: {
				user: { type:Object },
				author: { type:Object, notify:true },
				authorData: { type:Object },
			},
			
			getShareUrl: function() {
				return 'http://' + ${ domain } + pratilipi.pageUrl;
			},
			
			showCompleteSummary: function() {
				var jSummary = jQuery( this.querySelector( '.summary' ) );
				jSummary.html( this.author.summary );
				if( jSummary.text().length > 200 ) {
					jQuery( this.querySelector( '.show-more' ) ).hide();
					jQuery( this.querySelector( '.show-less' ) ).show();
				} else {
					jQuery( this.querySelector( '.show-more' ) ).hide();
					jQuery( this.querySelector( '.show-less' ) ).hide();
				}
			},
			
			showSummarySnippet: function() {
				var jSummary = jQuery( this.querySelector( '.summary' ) );
				jSummary.html( this.author.summary );
				if( jSummary.text().length > 200 ) {
					jSummary.text( jSummary.text().substr( 0, 200 ) + '...' );
					jQuery( this.querySelector( '.show-more' ) ).show();
					jQuery( this.querySelector( '.show-less' ) ).hide();
				} else {
					jQuery( this.querySelector( '.show-more' ) ).hide();
					jQuery( this.querySelector( '.show-less' ) ).hide();
				}
			},
			
			ready: function() {
				this.set( 'author', this.authorData );
				this.showSummarySnippet();
			}
			
		});

	</script>

</dom-module>