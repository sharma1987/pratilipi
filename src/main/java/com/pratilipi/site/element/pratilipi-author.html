<link rel="import" href="pratilipi-social.html" />

<dom-module id="pratilipi-author">

	<style>

		:host {
			display: block;
		}

		.media {
			padding: 10px;
			padding-bottom: 0px;
		}		

		
		.media-left img {
			width: 150px;
			height: 225px;
		}
		
		.media-left a {
			display: block;
			text-align:center;
			width: 150px;
			margin-top: 10px;
			padding: 5px;
		}
		
		.media-left a * {
			margin: 0px;
		}
		
		
		.media-body h2, .media-body h4 {
			margin: 5px 0px;
		}
		
		
		
		
		
		td, th {
			width: 150px;
			height: 25px;
		}

		td, .summary{
			color: #666666; 
		}

		.show-more, .show-less {
			color: black;
			font-weight: bold;
			text-decoration: underline;
		}
		
		
		
		
		
	</style>
	
	
	<template>
		<div class="secondary-500 media">

			<div class="media-left">
				<img class="media-object" src="{{ author.imageUrl }}" alt="{{ author.fullName }}" title="{{ author.fullNameEn }}"/>
				<div class="primary-500">
					<a href="#PublishedWorks">
						<h4><span>{{ author.contentPublished }}</span> Works</h4>
						<span>on Pratilipi</span>
					</a>
				</div>
				<pratilipi-social shareUrl="getShareUrl"></pratilipi-social>
			</div>
			
			<div class="media-body">
				<div style="height:190px">
					<h2>{{ author.name }}</h2>
					<h4>"<span>{{ author.penName }}</span>"</h4>
					<table>
						<tr>
							<th>Location</th>
							<td>New Delhi</td>
						</tr>
						<tr>
							<th>Language(s)</th>
							<td>Tamil, English</td>
						</tr>
						<tr>
							<th>Website</th>
							<td><a href= "http://www.google.co.in">google.com</a></td>
						</tr>
						<tr>
							<th>Member Since</th>
							<td>August 2007</td>
						</tr>
					</table>
				</div>
				<hr/>
				<div>
					<h4>${ _strings.author_about }</h4>
					<span class="summary">{{ author.summary }}</span>
					<a href="#" class="show-more" on-click="showCompleteSummary"><small>(more)</small></a>
					<a href="#" class="show-less" on-click="showSummarySnippet"><small>(less)</small></a>
				</div>
			</div>
			
			<hr/>
			
			<content></content>
		</div>
	</template>
	
	
	<script>
		Polymer({
			is: 'pratilipi-author',
			
			properties: {
				author: { type: Object }
			},
			
			getShareUrl: function() {
				return 'http://www.pratilipi.com/' + author.pageUrl;
			},
			
			
			
			
			
			
			showCompleteSummary: function() {
				jQuery( '.summary' ).html( this.summaryString );
				jQuery( '.show-more' ).hide();
				jQuery( '.show-less' ).show();
			},
			
			showSummarySnippet: function() {
				jQuery( '.summary' ).text( this.summaryString.substr( 0, 320 ) + '...' );
				jQuery( '.show-more' ).show();
				jQuery( '.show-less' ).hide();
			},
			
			showNormal: function() {
				jQuery( '.summary' ).html( this.summaryString );
				jQuery( '.show-more' ).hide();
				jQuery( '.show-less' ).hide();
			},
			
			ready: function() {
				this.summaryString = jQuery( '.summary' ).text();
				if(this.summaryString.length > 320)
					this.showSummarySnippet();
				else
					this.showNormal(); 
			}

			
			
			
			
			
		});

	</script>

</dom-module>